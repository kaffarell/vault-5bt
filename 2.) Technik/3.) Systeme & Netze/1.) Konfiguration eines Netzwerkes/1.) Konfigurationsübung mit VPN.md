![Aufbau](https://cdn.discordapp.com/attachments/613625981219110914/973506697987498004/unknown.png)

Wobei $R_4$ Router **7200** ist.
Die Toolbox agiert wie ein Webserver.
Ziel ist es, dass unser PC mittels eines VPNs den Webserver einer anderen Gruppe erreichen kann.

Zuerst muss $R_4$ auf $f2/0$ mit **DHCP** IP erhalten
```ad-info
ena
conf t
int f0/1
ip address dhcp
no sh
```

Danach muss $R_4$ auf $f0/0$ eine **statische** **IP** erhalten
```ad-info
ena
conf t
int f0/0
ip address 192.168.X.1 255.255.255.0
no sh
```
Das X ist die Nummer der Gruppe (in unserem Fall 1)

Anschließend wurde dem **PC** statisch die IP **192.168.X.2** und der **Toolbox** die IP **192.168.X.50** gegeben
```ad-info
Für PC muss folgender Befehl ausgeführt werden.
ip  <abbr title="IP Address">192.168.X.2</abbr> <abbr title="subnet mask">255.255.255.0</abbr> <abbr title="default gateway">192.168.X.1</abbr>

Bei der Toolbox muss man bei der Konfiguration auf "EDIT" klicken und den mittleren Block auskommentieren. Dort müssen dann IP und Gateway eingetragen werden.
```

Danach muss auf dem Router NAT/PAT eingerichtet werden
```ad-info
int $f0/0$
Ip nat inside
exit

int $f2/0$
ip nat outside
exit


access-list 1 permit <abbr title="Lokales Netzwerk">192.168.X.0</abbr> <abbr title="Wildcard">0.0.0.255</abbr>
ip nat inside source list 1 int <abbr title="Äußerer Port">f2/0</abbr> overload
```

Um den VPN einzurichten muss beim Router $R_4$ folgendes vorgenommen werden
```ad-info
crypto ipsec transform-set TRANS-ESP esp-3des esp-sha-hmac
crypto map CRYPTO_MAP 10 ipsec-isakmp
set peer <abbr title="Adresse des Netzwerkes eines Kollegen">10.10.30.100</abbr>
set transform-set TRANS-ESP
match address 100
int fa 2/0
crypto map CRYPTO_MAP
exit
access-list 100 permit ip <abbr title="Eigenes Netz">192.168.1.0</abbr> 0.0.0.255 <abbr title="INTERNES Netzwerk des Kollegen">192.168.4.0</abbr> 0.0.0.255
crypto isakmp key 0 teststring address 
```

### Webserver Konfigurieren
Es gilt einen Webserver aufzusetzen, welcher über ein statisches NAT im Netzwerk zugreifen kann. Ein statisches NAT wird benötigt, damit der Webserver immer mit der gleichen IP erreicht werden kann.

Bild

Mit dem Webterminal wurde getestet ober der Webserver (Toolbox) im lokalen Netz zugänglich ist. Als dies bestätigt wurde, wurde ein statisches NAT für den Webserver eingerichtet.

```ad-info
ip nat inside source static <abbr title="Eigene Lokale IP des Webservers">192.168.1.50</abbr> <abbr title="IP im öffentlichen Netz zu der es werden soll">10.10.30.200</abbr>
```
Wir haben mittels ping sicher gestellt, dass 10.10.30.200 noch nicht vergeben war.
```ad-info
ip name-server 10.10.30.1
ip domain-lookup
```
Anschließend wurde bei der Toolbox unter /var/www/html die index.html bearbeitet um die Website zu personalisieren.




Es wurde ein UbuntuDocker als Gerät bei GNS3 installiert.
Der zweck dessen war, um dieses als ssh-Verbindung zu nutzen, jedoch musste dadurch erst eine Verbindung ins Internet hergestellt werden um um das ssh package zu installieren.